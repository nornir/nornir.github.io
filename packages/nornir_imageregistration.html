
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Image Registration (nornir_imageregistration) &#8212; Nornir 1.3.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Pools (nornir_pools)" href="nornir_pools.html" />
    <link rel="prev" title="pyre (nornir_pyre)" href="nornir_pyre.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="nornir_pools.html" title="Pools (nornir_pools)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="nornir_pyre.html" title="pyre (nornir_pyre)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Nornir 1.3.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="packages.html" accesskey="U">Packages</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Image Registration (nornir_imageregistration)</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-nornir_imageregistration">
<span id="image-registration-nornir-imageregistration"></span><h1>Image Registration (nornir_imageregistration)<a class="headerlink" href="#module-nornir_imageregistration" title="Permalink to this headline">¶</a></h1>
<section id="alignment-record">
<h2>alignment_record<a class="headerlink" href="#alignment-record" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="nornir_imageregistration.alignment_record.AlignmentRecord">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.alignment_record.</span></span><span class="sig-name descname"><span class="pre">AlignmentRecord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">peak</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flipped_ud</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.alignment_record.AlignmentRecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Records basic registration information as an angle and offset between a fixed and moving image
If the offset is zero the center of both images occupy the same point.  
The offset determines the translation of the moving image over the fixed image.
There is no support for scale, and there should not be unless added as another variable to the alignment record</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>peak</strong> (<em>array</em>) – Translation vector for moving image</p></li>
<li><p><strong>weight</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The strength of the alignment</p></li>
<li><p><strong>angle</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – Angle to rotate moving image in degrees</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-nornir_imageregistration.core">
<span id="core"></span><h2>core<a class="headerlink" href="#module-nornir_imageregistration.core" title="Permalink to this headline">¶</a></h2>
<p>scipy image arrays are indexed [y,x]</p>
<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.ConstrainedRange">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">ConstrainedRange</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxVal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minVal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.ConstrainedRange" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a range that falls within min/max limits.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.ConvertImagesInDict">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">ConvertImagesInDict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ImagesToConvertDict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Flip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Flop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">InputBpp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">OutputBpp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Invert</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bDeleteOriginal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">RightLeftShift</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">AndValue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MinMax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.ConvertImagesInDict" title="Permalink to this definition">¶</a></dt>
<dd><p>The key and value in the dictionary have the full path of an image to convert.
MinMax is a tuple [Min,Max] passed to the -level parameter if it is not None
RightLeftShift is a tuple containing a right then left then return to center shift which should be done to remove useless bits from the data
I do not use an and because I do not calculate ImageMagick’s quantum size yet.
Every image must share the same colorspace</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if images were converted</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.CropImage">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">CropImage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">imageparam</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Xo</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Yo</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Height</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.CropImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Crop the image at the passed bounds and returns the cropped ndarray.
If the requested area is outside the bounds of the array then the correct region is returned
with a background color set</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imageparam</strong> (<em>ndarray</em>) – An ndarray image to crop.  A string containing a path to an image is also acceptable.e</p></li>
<li><p><strong>Xo</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – X origin for crop</p></li>
<li><p><strong>Yo</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Y origin for crop</p></li>
<li><p><strong>Width</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – New width of image</p></li>
<li><p><strong>Height</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – New height of image</p></li>
<li><p><strong>cval</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – default value for regions outside the original image boundaries.  Defaults to 0.  Use ‘random’ to fill with random noise matching images statistical profile</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Cropped image</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.DimensionWithOverlap">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">DimensionWithOverlap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.DimensionWithOverlap" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>val</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – Original dimension</p></li>
<li><p><strong>overlap</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – Amount of overlap possible between images, from 0 to 1</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Required dimension size to unambiguously determine the offset in an fft image</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.ExtractROI">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">ExtractROI</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">area</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.ExtractROI" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an ROI around a center point with the area, if the area passes a boundary the ROI
maintains the same area, but is shifted so the entire area remains in the image.
USES NUMPY (Y,X) INDEXING</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.FFTPhaseCorrelation">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">FFTPhaseCorrelation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">FFTFixed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FFTMoving</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delete_input</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.FFTPhaseCorrelation" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the phase shift correlation of the FFT’s of two images.</p>
<p>Dimensions of Fixed and Moving images must match</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>FixedImage</strong> (<em>ndarray</em>) – grayscale image</p></li>
<li><p><strong>MovingImage</strong> (<em>ndarray</em>) – grayscale image</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Correlation image of the FFT’s.  Light pixels indicate the phase is well aligned at that offset.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndimage</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.FindOffset">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">FindOffset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">FixedImage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MovingImage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MinOverlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MaxOverlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FFT_Required</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FixedImageShape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MovingImageShape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.FindOffset" title="Permalink to this definition">¶</a></dt>
<dd><p>return an alignment record describing how the images overlap. The alignment record indicates how much the 
moving image must be rotated and translated to align perfectly with the FixedImage.</p>
<p>If adjusting control points the peak can be added to the fixed image’s control point, or subtracted from the 
warped image’s control point (accounting for any transform used to create the warped image) to align the images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>FixedImage</strong> (<em>ndarray</em>) – Target space we are registering into</p></li>
<li><p><strong>MovingImage</strong> (<em>ndarray</em>) – Source space we are coming from</p></li>
<li><p><strong>MinOverlap</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The minimum amount of overlap by area the registration must have</p></li>
<li><p><strong>MaxOverlap</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum amount of overlap by area the registration must have</p></li>
<li><p><strong>FFT_Required</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – True by default, if False the input images are in FFT space already</p></li>
<li><p><strong>FixedImageShape</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a>) – Defaults to None, if specified it contains the size of the fixed image before padding.  Used to calculate mask for valid overlap values.</p></li>
<li><p><strong>MovingImageShape</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a>) – Defaults to None, if specified it contains the size of the moving image before padding.  Used to calculate mask for valid overlap values.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.FindPeak">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">FindPeak</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">OverlapMask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.FindPeak" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the offset of the strongest response in a phase correlation image</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> (<em>ndimage</em>) – grayscale image</p></li>
<li><p><strong>Cutoff</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – Percentile used to threshold image.  Values below the percentile are ignored</p></li>
<li><p><strong>OverlapMask</strong> (<em>ndimage</em>) – Mask describing which pixels are eligible</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>scaled_offset of peak from image center and sum of pixels values at peak</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#tuple" title="(in Python v3.7)">tuple</a>, <a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)">float</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.ForceGrayscale">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">ForceGrayscale</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.ForceGrayscale" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Param</dt>
<dd class="field-odd"><p>ndarray with 3 dimensions</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>grayscale data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray with 2 dimensions</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.GenRandomData">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">GenRandomData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">height</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mean</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">standardDev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_val</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.GenRandomData" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate random data of shape with the specified mean and standard deviation</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.GetImageSize">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">GetImageSize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_param</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.GetImageSize" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> (<em>image_param</em>) – Either a path to an image file or an ndarray</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Image (height, width)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#tuple" title="(in Python v3.7)">tuple</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.ImageIntensityAtPercent">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">ImageIntensityAtPercent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Percent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.995</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.ImageIntensityAtPercent" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the intensity of the Cutoff% most intense pixel in the image</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.ImagePhaseCorrelation">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">ImagePhaseCorrelation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">FixedImage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MovingImage</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.ImagePhaseCorrelation" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the phase shift correlation of the FFT’s of two images.</p>
<p>Dimensions of Fixed and Moving images must match</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>FixedImage</strong> (<em>ndarray</em>) – grayscale image</p></li>
<li><p><strong>MovingImage</strong> (<em>ndarray</em>) – grayscale image</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Correlation image of the FFT’s.  Light pixels indicate the phase is well aligned at that offset.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndimage</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.ImageToTiles">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">ImageToTiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.ImageToTiles" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source_image</strong> (<em>ndarray</em>) – Image to cut into tiles</p></li>
<li><p><strong>tile_size</strong> (<em>array</em>) – Shape of each tile</p></li>
<li><p><strong>grid_shape</strong> (<em>array</em>) – Dimensions of grid, if None the grid is large enough to reproduce the source_image with zero padding if needed</p></li>
<li><p><strong>cval</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#object" title="(in Python v3.7)"><em>object</em></a>) – Fill value for images that are padded.  Default is zero.  Use ‘random’ to generate random noise</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary of images indexed by tuples</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.ImageToTilesGenerator">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">ImageToTilesGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coord_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.ImageToTilesGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>An iterator generating all tiles for an image
:param array tile_size: Shape of each tile
:param array grid_shape: Dimensions of grid, if None the grid is large enough to reproduce the source_image with zero padding if needed
:param tuple coord_offset: Add this amount to coordinates returned by this function, used if the image passed is part of a larger image
:param object cval: Fill value for images that are padded.  Default is zero.  Use ‘random’ to generate random noise
:return: (iCol,iRow, tile_image)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.LoadImage">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">LoadImage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ImageFullPath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ImageMaskFullPath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MaxDimension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.LoadImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads an image converts to greyscale, masks it, and removes extrema pixels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ImageFullPath</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Path to image</p></li>
<li><p><strong>ImageMaskFullPath</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Path to mask, dimension should match input image</p></li>
<li><p><strong>MaxDimension</strong> – Limit the largest dimension of the returned image to this size.  Downsample if necessary.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Loaded image.  Masked areas and extrema pixel values are replaced with gaussian noise matching the median and std. dev. of the unmasked image.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndimage</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.NearestPowerOfTwoWithOverlap">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">NearestPowerOfTwoWithOverlap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.NearestPowerOfTwoWithOverlap" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Same as DimensionWithOverlap, but output dimension is increased to the next power of two for faster FFT operations</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.NormalizeImage">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">NormalizeImage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.NormalizeImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Adjusts the image to have a range of 0 to 1.0</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.OneBit_img_from_bool_array">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">OneBit_img_from_bool_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.OneBit_img_from_bool_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Covers for pillow bug with bit images
<a class="reference external" href="https://stackoverflow.com/questions/50134468/convert-boolean-numpy-array-to-pillow-image">https://stackoverflow.com/questions/50134468/convert-boolean-numpy-array-to-pillow-image</a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.PadImageForPhaseCorrelation">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">PadImageForPhaseCorrelation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MinOverlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ImageMedian</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ImageStdDev</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NewWidth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NewHeight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">PowerOfTwo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.PadImageForPhaseCorrelation" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares an image for use with the phase correlation operation.  Padded areas are filled with noise matching the histogram of the 
original image.  Optionally the min/max pixels can also replaced be replaced with noise using FillExtremaWithNoise</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> (<em>ndarray</em>) – Input image</p></li>
<li><p><strong>MinOverlap</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – Minimum overlap allowed between the input image and images it will be registered to</p></li>
<li><p><strong>ImageMean</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – Median value of noise, calculated or pulled from cache if none</p></li>
<li><p><strong>ImageStdDev</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – Standard deviation of noise, calculated or pulled from cache if none</p></li>
<li><p><strong>NewWidth</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Pad input image to this dimension if not none</p></li>
<li><p><strong>NewHeight</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Pad input image to this dimension if not none</p></li>
<li><p><strong>PowerOfTwo</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Pad the image to a power of two if true</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An image with the input image centered surrounded by noise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndimage</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.RandomNoiseMask">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">RandomNoiseMask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ImageMedian</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ImageStdDev</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.RandomNoiseMask" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill the masked area with random noise with gaussian distribution about the image
mean and with standard deviation matching the image’s standard deviation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> (<em>ndimage</em>) – Input image</p></li>
<li><p><strong>mask</strong> (<em>ndimage</em>) – Mask, zeros are replaced with noise.  Ones pull values from input image</p></li>
<li><p><strong>ImageMedian</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – Mean of noise distribution, calculated from image if none</p></li>
<li><p><strong>ImageStdDev</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – Standard deviation of noise distribution, calculated from image if none</p></li>
<li><p><strong>Copy</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Returns a copy of input image if true, otherwise write noise to the input image</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ndimage</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.ReplaceImageExtramaWithNoise">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">ReplaceImageExtramaWithNoise</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ImageMedian</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ImageStdDev</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.ReplaceImageExtramaWithNoise" title="Permalink to this definition">¶</a></dt>
<dd><p>Replaced the min/max values in the image with random noise.  This is useful when aligning images composed mostly of dark or bright regions</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.ResizeImage">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">ResizeImage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scalar</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.ResizeImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Change image size by scalar</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.SafeROIRange">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">SafeROIRange</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxVal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minVal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.SafeROIRange" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a range cropped within min and max values, but always attempts to have count entries in the ROI.
If minVal or maxVal would crop the list then start is shifted to ensure the resulting value has the correct number of entries.
:param int start: Starting value
:param int count: Number of items in the list, incremented by 1, to return.
:param int maxVal: Maximum value allowed to be returned.  Output list will be cropped if it equals or exceeds this value.
:param int minVal: Minimum value allowed to be returned.  Output list will be cropped below this value.
:return:  [start start+1, start+2, …, start+count]</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.SaveImage">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">SaveImage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ImageFullPath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bpp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.SaveImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the image as greyscale with no contrast-stretching
:param str ImageFullPath: The filename to save
:param ndarray image: The image data to save
:param int bpp: The bit depth to save, if the image data bpp is higher than this value it will be reduced.  Otherwise only the bpp required to preserve the image data will be used. (8-bit data will not be upsampled to 16-bit)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.SaveImage_JPeg2000">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">SaveImage_JPeg2000</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ImageFullPath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_dim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.SaveImage_JPeg2000" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the image as greyscale with no contrast-stretching</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.ScalarForMaxDimension">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">ScalarForMaxDimension</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.ScalarForMaxDimension" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the scalar value to use so the largest dimensions in a list of shapes has the maximum value</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.Shrink">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">Shrink</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">InFile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">OutFile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Scalar</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.Shrink" title="Permalink to this definition">¶</a></dt>
<dd><p>Shrinks the passed image file.  If Pool is not None the 
task is returned. kwargs are passed on to Pillow’s image save function
:param str InFile: Path to input file
:param str OutFile: Path to output file
:param float ShrinkFactor: Multiplier for image dimensions</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.TileGridShape">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">TileGridShape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_image_shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.TileGridShape" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an image and tile size, return the dimensions of the grid</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.array_distance">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">array_distance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.array_distance" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an Mx2 array into a Mx1 array of euclidean distances</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.index_with_array">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">index_with_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indicies</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.index_with_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns values from image at the coordinates
:param ndarray image: Image to index into
:param ndarray indicies: nx2 array of pixel coordinates</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="nornir_imageregistration.core.memmap_metadata">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">memmap_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.memmap_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>meta-data for a memmap array</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.npArrayToReadOnlySharedArray">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">npArrayToReadOnlySharedArray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">npArray</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.npArrayToReadOnlySharedArray" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a shared memory array for a numpy array.  Used to reduce memory footprint when passing parameters to multiprocess pools</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.ravel_index">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">ravel_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.ravel_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a nx2 numpy array of coordinates into array indicies</p>
<dl class="simple">
<dt>The arrays we expect are in this shape [[X1,Y1],</dt><dd><p>[X2,Y2],
[XN,YN]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.uint16_img_from_float_array">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">uint16_img_from_float_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.uint16_img_from_float_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Covers for pillow bug with bit images
<a class="reference external" href="https://github.com/python-pillow/Pillow/issues/2970">https://github.com/python-pillow/Pillow/issues/2970</a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.core.uint16_img_from_uint16_array">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.core.</span></span><span class="sig-name descname"><span class="pre">uint16_img_from_uint16_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.core.uint16_img_from_uint16_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Covers for pillow bug with bit images
<a class="reference external" href="https://github.com/python-pillow/Pillow/issues/2970">https://github.com/python-pillow/Pillow/issues/2970</a></p>
</dd></dl>

</section>
<section id="module-nornir_imageregistration.assemble">
<span id="assemble"></span><h2>assemble<a class="headerlink" href="#module-nornir_imageregistration.assemble" title="Permalink to this headline">¶</a></h2>
<p>Created on Apr 22, 2013</p>
<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.assemble.DestinationROI_to_SourceROI">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.assemble.</span></span><span class="sig-name descname"><span class="pre">DestinationROI_to_SourceROI</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transform</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">botleft</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extrapolate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.assemble.DestinationROI_to_SourceROI" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a transform to a region of interest within an image. Center and area are in fixed space</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transform</strong> (<em>transform</em>) – The transform used to map points between fixed and mapped space</p></li>
<li><p><strong>botleft</strong> (<em>1x2_array</em>) – The (Y,X) coordinates of the bottom left corner</p></li>
<li><p><strong>area</strong> (<em>1x2_array</em>) – The (Height, Width) of the region of interest</p></li>
<li><p><strong>exrapolate</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If true map points that fall outside the bounding box of the transform</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tuple of arrays.  First array is fixed space coordinates.  Second array is warped space coordinates.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#tuple" title="(in Python v3.7)">tuple</a>(Nx2 array,Nx2 array)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.assemble.ExtractRegion">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.assemble.</span></span><span class="sig-name descname"><span class="pre">ExtractRegion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">botleft</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">area</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.assemble.ExtractRegion" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a region from an image</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> (<em>ndarray</em>) – Source image</p></li>
<li><p><strong>botleft</strong> (<em>1x2_array</em>) – The (Y,X) coordinates of the bottom left corner</p></li>
<li><p><strong>area</strong> (<em>1x2_array</em>) – The (Height, Width) of the region of interest</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Image of requested region</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.assemble.FixedImageToWarpedSpace">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.assemble.</span></span><span class="sig-name descname"><span class="pre">FixedImageToWarpedSpace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transform</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">WarpedImageArea</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DataToTransform</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">botleft</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">area</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extrapolate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.assemble.FixedImageToWarpedSpace" title="Permalink to this definition">¶</a></dt>
<dd><p>Warps every image in the DataToTransform list using the provided transform.
:Param transform: transform to pass warped space coordinates through to obtain fixed space coordinates
:Param FixedImageArea: Size of fixed space region to map pixels into
:Param DataToTransform: Images to read pixel values from while creating fixed space images.  A list of images can be passed to map multiple images using the same coordinates.  A list may contain filename strings or numpy.ndarrays
:Param botleft: Origin of region to map
:Param area: Expected dimensions of output
:Param cval: Value to place in unmappable regions, defaults to zero.
:param bool exrapolate: If true map points that fall outside the bounding box of the transform</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.assemble.ParameterToStosTransform">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.assemble.</span></span><span class="sig-name descname"><span class="pre">ParameterToStosTransform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transformData</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.assemble.ParameterToStosTransform" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>transformData</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#object" title="(in Python v3.7)"><em>object</em></a>) – Either a full path to a .stos file, a stosfile, or a transform object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A transform</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.assemble.SourceROI_to_DestinationROI">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.assemble.</span></span><span class="sig-name descname"><span class="pre">SourceROI_to_DestinationROI</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transform</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">botleft</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extrapolate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.assemble.SourceROI_to_DestinationROI" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply an inverse transform to a region of interest within an image. Center and area are in fixed space</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transform</strong> (<em>transform</em>) – The transform used to map points between fixed and mapped space</p></li>
<li><p><strong>botleft</strong> (<em>1x2_array</em>) – The (Y,X) coordinates of the bottom left corner</p></li>
<li><p><strong>area</strong> (<em>1x2_array</em>) – The (Height, Width) of the region of interest</p></li>
<li><p><strong>exrapolate</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If true map points that fall outside the bounding box of the transform</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tuple of arrays.  First array is fixed space coordinates.  Second array is warped space coordinates.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#tuple" title="(in Python v3.7)">tuple</a>(Nx2 array,Nx2 array)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.assemble.TransformImage">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.assemble.</span></span><span class="sig-name descname"><span class="pre">TransformImage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transform</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixedImageShape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warpedImage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">CropUndefined</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.assemble.TransformImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Cut image into tiles, assemble small chunks
:param transform transform: Transform to apply to point to map from warped image to fixed space
:param ndarray fixedImageShape: Width and Height of the image to create
:param ndarray warpedImage: Image to transform to fixed space
:param bool CropUndefined: If true exclude areas outside the convex hull of the transform, if it exists
:return: An ndimage array of the transformed image</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.assemble.TransformStos">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.assemble.</span></span><span class="sig-name descname"><span class="pre">TransformStos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transformData</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">OutputFilename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixedImage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warpedImage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scalar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">CropUndefined</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.assemble.TransformStos" title="Permalink to this definition">¶</a></dt>
<dd><p>Assembles an image based on the passed transform.
:param str fixedImage: Image describing the size we want the warped image to fill, either a string or ndarray
:param str warpedImage: Image we will warp into fixed space, either a string or ndarray
:param float scalar: Amount to scale the transform before passing the image through
:param bool CropUndefined: If true exclude areas outside the convex hull of the transform, if it exists
:param bool Dicreet: True causes points outside the defined transform region to be clipped instead of interpolated
:return: transformed image</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nornir_imageregistration.assemble.WarpedImageToFixedSpace">
<span class="sig-prename descclassname"><span class="pre">nornir_imageregistration.assemble.</span></span><span class="sig-name descname"><span class="pre">WarpedImageToFixedSpace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transform</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FixedImageArea</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DataToTransform</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">botleft</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">area</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extrapolate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nornir_imageregistration.assemble.WarpedImageToFixedSpace" title="Permalink to this definition">¶</a></dt>
<dd><p>Warps every image in the DataToTransform list using the provided transform.
:Param transform: transform to pass warped space coordinates through to obtain fixed space coordinates
:Param FixedImageArea: Size of fixed space region to map pixels into
:Param DataToTransform: Images to read pixel values from while creating fixed space images.  A list of images can be passed to map multiple images using the same coordinates.  A list may contain filename strings or numpy.ndarrays
:Param botleft: Origin of region to map
:Param area: Expected dimensions of output
:Param cval: Value to place in unmappable regions, defaults to zero.
:param bool extrapolate: If true map points that fall outside the bounding box of the transform</p>
</dd></dl>

</section>
<section id="module-nornir_imageregistration.assemble_tiles">
<span id="assemble-tiles"></span><h2>assemble_tiles<a class="headerlink" href="#module-nornir_imageregistration.assemble_tiles" title="Permalink to this headline">¶</a></h2>
<p>Created on Oct 28, 2013</p>
<p>Deals with assembling images composed of mosaics or dividing images into tiles</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Image Registration (nornir_imageregistration)</a><ul>
<li><a class="reference internal" href="#alignment-record">alignment_record</a></li>
<li><a class="reference internal" href="#module-nornir_imageregistration.core">core</a></li>
<li><a class="reference internal" href="#module-nornir_imageregistration.assemble">assemble</a></li>
<li><a class="reference internal" href="#module-nornir_imageregistration.assemble_tiles">assemble_tiles</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="nornir_pyre.html"
                          title="previous chapter">pyre (nornir_pyre)</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="nornir_pools.html"
                          title="next chapter">Pools (nornir_pools)</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/packages/nornir_imageregistration.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="nornir_pools.html" title="Pools (nornir_pools)"
             >next</a> |</li>
        <li class="right" >
          <a href="nornir_pyre.html" title="pyre (nornir_pyre)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Nornir 1.3.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="packages.html" >Packages</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Image Registration (nornir_imageregistration)</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, James Anderson.
      Last updated on Apr 01, 2022.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>
  </body>
</html>